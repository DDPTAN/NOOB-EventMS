[
 {
  "breadcrumbs": null,
  "content_type": "HTML",
  "context_script": null,
  "css": ".event-list-container {\n    display: flex;\n    align-items: center;\n}\n\n.event-wrapper{\n    display: flex;\n    align-items: center;\n}\n.event-card {\n    margin-bottom: 20px;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n    border-radius: 16px;\n    overflow: hidden;\n    width: 100%;\n    max-width: 300px;\n}\n.event-card img {\n    width: 100%;\n    height: 200px;\n    object-fit: cover;\n}\n.event-card .card-body {\n    padding: 15px;\n}\n.event-card h5 {\n    margin-bottom: 10px;\n    font-size: 1.25rem;\n}\n.event-card p {\n    margin-bottom: 5px;\n    font-size: 0.9rem;\n}\n.status {\n    display: inline-block;\n    padding: 5px 10px;\n    border-radius: 15px;\n    font-size: 0.9rem;\n    font-weight: bold;\n}\n.status.available {\n    background-color: #d4edda;\n    color: #155724;\n}\n.status.sold-out {\n    background-color: #f8d7da;\n    color: #721c24;\n}\n\n.details-button {\n    display: inline-block;\n    padding: 5px 10px;\n    font-size: 0.9rem;\n    border: none;\n    background-color: #007bff;\n    color: white;\n    border-radius: 15px;\n    cursor: pointer;\n}\n.details-button:hover {\n    background-color: #0056b3;\n}",
  "docstatus": 0,
  "doctype": "Web Page",
  "dynamic_route": 0,
  "dynamic_template": 0,
  "enable_comments": 0,
  "end_date": null,
  "full_width": 0,
  "header": null,
  "insert_style": 1,
  "javascript": "frappe.ready(function () {\n    // Check if the user is logged in using frappe.session.user\n    if (frappe.session.user === \"Guest\") {\n        // If the user is not logged in (Guest), redirect to the login page\n        window.location.href = \"/login\";\n    }\n});\n\n$(document).ready(function() {\n    $.ajax({\n        url: 'http://event.localhost:8000/api/method/event_management.api.get_events',\n        method: 'GET',\n        success: function(response) {\n            if(response.message.success_key === 1) {\n                const events = response.message.data;\n                let eventListHtml = '';\n                \n                events.forEach(event => {\n                    const statusClass = event.status.toLowerCase() === 'available' ? 'available' : 'sold-out';\n                    \n                    eventListHtml += `\n                        <div class=\"event-card\">\n                            <img src=\"${event.image}\" class=\"card-img-top\" alt=\"${event.event_title}\">\n                            <div class=\"card-body\">\n                            <h5 class=\"card-title\">${event.event_title}</h5>\n                            <p class=\"card-text\"><strong>Organized By:</strong> ${event.organized_by}</p>\n                            <p class=\"card-text\"><strong>Starts on:</strong> ${new Date(event.starts_on).toLocaleString()}</p>\n                                <p class=\"card-text\"><strong>Ends on:</strong> ${new Date(event.ends_on).toLocaleString()}</p>\n                                <p class=\"card-text\">${event.location}</p>\n                                <p class=\"card-text\"><strong>Price:</strong> Rp ${event.price.toLocaleString('id-ID')}</p>\n                                <div class=\"status-container\">\n                                    <p class=\"card-text status ${statusClass}\">${event.status}</p>\n                                    <button class=\"details-button\" onclick=\"seeDetails('${event.name}')\">See Details</button>\n                                </div>\n                            </div>\n                        </div>\n                    `;\n                });\n\n                $('#event-list').html(eventListHtml);\n            } else {\n                $('#event-list').html('<p>No events found.</p>');\n            }\n        },\n        error: function() {\n            $('#event-list').html('<p>Failed to fetch events.</p>');\n        }\n    });\n});\n\nfunction seeDetails(eventId) {\n    // Redirect to the event details page or perform any other desired action\n    console.log(\"See Details\")\n    window.location.href = `/event_details?event_id=${eventId}`;\n}",
  "main_section": null,
  "main_section_html": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Event List</title>\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css\">\n</head>\n<body>\n    <div class=\"container mt-5\">\n            <div id=\"event-list\" class=\"event-list-container\"></div>\n    </div>\n    \n    <script src=\"https://code.jquery.com/jquery-3.6.0.min.js\"></script>\n    <script src=\"main.js\"></script>\n</html>\n",
  "main_section_md": null,
  "meta_description": null,
  "meta_image": null,
  "meta_title": null,
  "modified": "2024-06-27 22:02:05.957985",
  "module": "Event Management System",
  "name": "event-list",
  "page_blocks": [],
  "published": 1,
  "route": "dashboard",
  "show_sidebar": 1,
  "show_title": 1,
  "slideshow": null,
  "start_date": null,
  "text_align": "Left",
  "title": "Event List",
  "website_sidebar": "User Sidebar"
 },
 {
  "breadcrumbs": null,
  "content_type": "HTML",
  "context_script": null,
  "css": ".event-details-card {\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n    border-radius: 8px;\n    overflow: hidden;\n    width: 100%;\n    max-width: 600px;\n    margin: auto;\n}\n.event-details-card img {\n    width: 100%;\n    height: 300px;\n    object-fit: cover;\n}\n.event-details-card .card-body {\n    padding: 15px;\n}\n.event-details-card h5 {\n    margin-bottom: 10px;\n    font-size: 1.5rem;\n}\n.event-details-card p {\n    margin-bottom: 5px;\n    font-size: 1rem;\n}\n.quantity-control {\n    display: flex;\n    align-items: center;\n    margin-top: 10px;\n}\n.quantity-control button {\n    margin: 0 10px;\n    padding: 5px 10px;\n}\n.quantity-control span {\n    font-size: 1.2rem;\n    width: 40px;\n    text-align: center;\n}",
  "docstatus": 0,
  "doctype": "Web Page",
  "dynamic_route": 0,
  "dynamic_template": 0,
  "enable_comments": 0,
  "end_date": null,
  "full_width": 0,
  "header": null,
  "insert_style": 1,
  "javascript": "$(document).ready(function() {\n    const urlParams = new URLSearchParams(window.location.search);\n    const eventId = urlParams.get('event_id');\n\n    if (eventId) {\n        $.ajax({\n            url: `http://event.localhost:8000/api/method/event_management.api.get_event_by_id?id=${eventId}`,\n            method: 'GET',\n            data: { event_id: eventId },\n            success: function(response) {\n                console.log(\"ini response\", response);\n                if (response.message.success_key === 1) {\n                    const event = response.message.data;\n                    console.log(\"Event response\", event);\n\n                    const eventDetailsHtml = `\n                        <img src=\"${event.image}\" class=\"card-img-top\" alt=\"${event.event_title}\">\n                        <div class=\"card-body\">\n                            <h5 class=\"card-title\">${event.event_title}</h5>\n                            <p class=\"card-text\"><strong>Starts on:</strong> ${new Date(event.starts_on).toLocaleString()}</p>\n                            <p class=\"card-text\"><strong>Ends on:</strong> ${new Date(event.ends_on).toLocaleString()}</p>\n                            <p class=\"card-text\"><strong>Organized by:</strong> ${event.organized_by}</p>\n                            <p class=\"card-text\"><strong>Location:</strong> ${event.location}</p>\n                            <p class=\"card-text\"><strong>Price:</strong> Rp ${event.price.toLocaleString('id-ID')}</p>\n                            <p class=\"card-text\"><strong>Status:</strong> ${event.status}</p>\n                            <p class=\"card-text\"><strong>Description:</strong> ${event.description}</p>\n                            <p class=\"card-text\"><strong>Number of Tickets:</strong> ${event.number_of_tickets}</p>\n                            <div class=\"quantity-control\">\n                                <button id=\"decrease-quantity\" class=\"btn btn-secondary\">-</button>\n                                <span id=\"order-quantity\">1</span>\n                                <button id=\"increase-quantity\" class=\"btn btn-secondary\">+</button>\n                            </div>\n                            <button id=\"submit-order\" class=\"btn btn-primary mt-3\">Submit Order</button>\n                        </div>\n                    `;\n\n                    $('#event-details').html(eventDetailsHtml);\n\n                    // Quantity control functionality\n                    let quantity = 1;\n                    $('#increase-quantity').on('click', function() {\n                        quantity++;\n                        $('#order-quantity').text(quantity);\n                    });\n\n                    $('#decrease-quantity').on('click', function() {\n                        if (quantity > 1) {\n                            quantity--;\n                            $('#order-quantity').text(quantity);\n                        }\n                    });\n\n                    // Order submission functionality\n                    $('#submit-order').on('click', function() {\n                        $.ajax({\n                            url: `http://event.localhost:8000/api/method/event_management.api.create_order`,\n                            method: 'POST',\n                            contentType: 'application/json',\n                            data: JSON.stringify({ event_id: eventId, total_ticket: quantity }),\n                            success: function(response) {\n                                alert('Order submitted successfully!');\n                                window.location.href = \"/my-order\";\n                            },\n                            error: function(e) {\n                                alert('Failed to submit order.');\n                            }\n                        });\n                    });\n                } else {\n                    $('#event-details').html('<p>Event not found.</p>');\n                }\n            },\n            error: function() {\n                $('#event-details').html('<p>Failed to fetch event details.</p>');\n            }\n        });\n    } else {\n        $('#event-details').html('<p>No event ID provided.</p>');\n    }\n});\n",
  "main_section": null,
  "main_section_html": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Event Details</title>\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css\">\n</head>\n<body>\n    <div class=\"container mt-5\">\n        <div id=\"event-details\" class=\"event-details-card card\"></div>\n    </div>\n    \n    <script src=\"https://code.jquery.com/jquery-3.6.0.min.js\"></script>\n    <script src=\"event_details.js\"></script>\n</body>\n</html>\n",
  "main_section_md": null,
  "meta_description": null,
  "meta_image": null,
  "meta_title": null,
  "modified": "2024-06-27 21:58:03.181505",
  "module": "Event Management System",
  "name": "event-detail",
  "page_blocks": [],
  "published": 1,
  "route": "event_details",
  "show_sidebar": 1,
  "show_title": 1,
  "slideshow": null,
  "start_date": null,
  "text_align": "Left",
  "title": "Event Detail",
  "website_sidebar": "User Sidebar"
 }
]